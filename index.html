<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHIFT 3D | Manufacturing Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;800&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        /* --- THEME VARIABLES --- */
        :root {
            --brand: #74A098;
            --bg-color: #080808; 
            --card-bg: #111;
            --text-main: #ffffff; 
            --text-sub: #888; 
            --border: #333;
            --input-bg: rgba(255,255,255,0.05);
            --nav-height: 90px;
        }

        body.light-mode {
            --bg-color: #f4f4f4; 
            --card-bg: #ffffff;
            --text-main: #1a1a1a; 
            --text-sub: #555; 
            --border: #ddd;
            --input-bg: rgba(0,0,0,0.05);
        }

        body { 
            margin: 0; 
            background: var(--bg-color); 
            font-family: 'Outfit', sans-serif; 
            color: var(--text-main); 
            transition: background 0.3s, color 0.3s; 
        }

        /* --- NAVIGATION --- */
        nav { 
            height: var(--nav-height);
            padding: 0 40px; 
            display: grid; 
            grid-template-columns: auto auto 1fr; 
            align-items: center; 
            background: var(--bg-color);
            position: sticky; top: 0; z-index: 100;
            border-bottom: 1px solid var(--border);
        }

        .logo-container { display: inline-flex; flex-direction: column; text-decoration: none; user-select: none; line-height: 1; }
        .logo-main { display: flex; align-items: baseline; gap: 2px; }
        .logo-shift { font-weight: 800; font-size: 1.8rem; color: var(--brand); letter-spacing: -1px; }
        .logo-3d { font-weight: 800; font-size: 1.8rem; color: var(--text-main); transition: color 0.3s;}
        .logo-slogan { margin-top: 4px; font-size: 0.65rem; letter-spacing: 1.5px; color: var(--text-sub); font-weight: 500; text-transform: uppercase; border-left: 2px solid var(--brand); padding-left: 8px; }

        .search-input { background: var(--input-bg); border: 1px solid var(--border); color: var(--text-main); font-family: 'Courier Prime', monospace; font-size: 0.9rem; padding: 0 20px; height: 44px; border-radius: 4px; width: 350px; outline: none; transition: 0.3s; }
        .search-input:focus { border-color: var(--brand); background: transparent; }

        .nav-right { display: flex; align-items: center; justify-content: flex-end; gap: 25px; }
        .extrusion-link { font-family: 'Courier Prime', monospace; font-size: 0.85rem; font-weight: 700; color: var(--text-sub); text-decoration: none; text-transform: uppercase; letter-spacing: 1px; }
        .extrusion-link:hover { color: var(--brand); }

        .login-btn, .cart-btn, .theme-btn { background: transparent; border: 1px solid var(--border); color: var(--text-main); height: 44px; padding: 0 20px; border-radius: 4px; font-family: 'Outfit'; font-weight: 500; cursor: pointer; transition: 0.3s; }
        .theme-btn { width: 44px; padding: 0; border-radius: 50%; }
        .login-btn:hover, .cart-btn:hover, .theme-btn:hover { border-color: var(--brand); background: rgba(116, 160, 152, 0.1); }

        /* --- SCROLLING ARROWS --- */
        .scroll-arrow { background: var(--card-bg); border: 1px solid var(--border); color: var(--text-main); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; font-size: 1.2rem; }
        .scroll-arrow:hover { border-color: var(--brand); color: var(--brand); }

        /* --- LAYOUT & CARDS --- */
        .container { max-width: 1400px; margin: 0 auto; padding: 40px; }
        h1, .section-heading { font-weight: 300; text-transform: uppercase; letter-spacing: 2px; font-size: 1.5rem; border-left: 4px solid var(--brand); padding-left: 15px; margin-bottom: 20px; }
        .grid { display: flex; gap: 30px; overflow-x: auto; padding-bottom: 10px; scroll-snap-type: x mandatory; scrollbar-width: none; }
        .grid::-webkit-scrollbar { display: none; }
        
        .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; transition: 0.3s; text-decoration: none; color: var(--text-main); flex: 0 0 320px; scroll-snap-align: start; }
        .card:hover { transform: translateY(-5px); border-color: var(--brand); }
        .card-img { width: 100%; height: 280px; object-fit: cover; background: #222; }
        .card-info { padding: 25px; }
        .action-row { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; border-top: 1px solid var(--border); padding-top: 15px; }
        .price { font-size: 1.3rem; font-weight: 700; }
        .btn { padding: 8px 16px; border: 1px solid var(--brand); color: var(--brand); border-radius: 4px; font-weight: 600; text-transform: uppercase; font-size: 0.75rem; cursor: pointer; transition: 0.2s; }
        .btn:hover { background: var(--brand); color: #000; }

        /* --- UI MODALS --- */
        .hidden { display: none !important; }
        .cart-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 105; }
        .cart-panel { position: fixed; top: 0; right: 0; width: 380px; height: 100%; background: var(--card-bg); z-index: 110; border-left: 1px solid var(--border); display: flex; flex-direction: column; }
        .checkout-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 200; }
        .checkout-content { background: var(--card-bg); padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; border: 1px solid var(--border); }

        @media (max-width: 768px) { .scroll-arrow { display: none; } }
    </style>
</head>
<body>

    <div id="splash-screen" style="position: fixed; inset: 0; z-index: 9999; background: #080808; display: flex; align-items: center; justify-content: center;">
        <button onclick="hideSplash()" style="position: absolute; bottom: 30px; right: 30px; z-index: 10000; background: rgba(255,255,255,0.1); color: white; border: 1px solid white; padding: 10px 20px; cursor: pointer; border-radius: 4px;">SKIP INTRO</button>
        <video id="intro-video" autoplay muted playsinline style="width: 100%; height: 100%; object-fit: cover;">
            <source src="intro.mp4" type="video/mp4">
        </video>
    </div>

    <nav>
        <div class="logo-wrapper">
            <a href="index.html" class="logo-container">
                <div class="logo-main"><span class="logo-shift">shift</span><span class="logo-3d">3D</span></div>
                <div class="logo-slogan">Additive Manufacturing Lab</div>
            </a>
        </div>
        <div class="search-wrapper">
            <input type="text" class="search-input" placeholder="SEARCH DATABASE...">
        </div>
        <div class="nav-right">
            <a href="products.html" class="extrusion-link">PRODUCTS</a>
            <button class="login-btn" onclick="startGoogleLogin()">LOG IN</button>
            <button class="cart-btn" onclick="toggleCart()">CART (<span id="cart-count">0</span>)</button>
            <button class="theme-btn" onclick="toggleTheme()" id="theme-icon">☀</button>
        </div>
    </nav>

    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: baseline;">
            <h1>Featured Products</h1>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <button class="scroll-arrow" onclick="scrollGrid('featured-grid', -350)">&#8592;</button>
                <button class="scroll-arrow" onclick="scrollGrid('featured-grid', 350)">&#8594;</button>
            </div>
        </div>

        <div class="grid" id="featured-grid">
            <div class="card">
                <img src="microlyzer.png" class="card-img" alt="Microlyzer">
                <div class="card-info">
                    <h3>Microlyzer</h3>
                    <p>DIY Portable Lab-grade Microscope</p>
                    <div class="action-row"><span class="price">$110.00</span><button class="btn" onclick="addToCart('Microlyzer', 110)">Add to Cart</button></div>
                </div>
            </div>
            <div class="card">
                <img src="thermotrace.png" class="card-img" alt="ThermoTrace">
                <div class="card-info">
                    <h3>ThermoTrace</h3>
                    <p>DIY Attachable Thermal Camera</p>
                    <div class="action-row"><span class="price">$50.00</span><button class="btn" onclick="addToCart('ThermoTrace', 50)">Add to Cart</button></div>
                </div>
            </div>
            <div class="card">
                <img src="benchy.png" class="card-img" alt="3D Benchy">
                <div class="card-info">
                    <h3>3D Benchy</h3>
                    <p>Calibration Benchmark Test</p>
                    <div class="action-row"><span class="price">$15.00</span><button class="btn" onclick="addToCart('3D Benchy', 15)">Add to Cart</button></div>
                </div>
            </div>
        </div>
        
        <h2 class="section-heading" style="margin-top:50px;">Gaming & Hobbies</h2>
        <div class="grid">
            <div class="card"><div class="card-img" style="display:flex;align-items:center;justify-content:center;color:#555;">DICE TOWER</div><div class="card-info"><h3>Dice Tower V3</h3><p>Gaming Accessory</p><div class="action-row"><span class="price">$25.00</span><button class="btn">View</button></div></div></div>
        </div>
    </div>

    <div id="cart-overlay" class="cart-overlay hidden" onclick="toggleCart()"></div>
    <div id="cart-panel" class="cart-panel hidden">
        <div style="padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between;">
            <h2>YOUR CART</h2><button onclick="toggleCart()" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
        </div>
        <div id="cart-items" style="padding: 20px; flex: 1; overflow-y: auto;">Your cart is empty.</div>
        <div style="padding: 20px; border-top: 1px solid var(--border);">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;"><span>Total:</span><span id="cart-total">$0.00</span></div>
            <button class="btn" style="width:100%" onclick="openCheckout()">Checkout</button>
        </div>
    </div>

    <div id="checkout-modal" class="checkout-modal hidden">
        <div class="checkout-content">
            <h2>Checkout</h2>
            <p>Finalize your precision manufacturing order.</p>
            <button class="btn" onclick="alert('Order Successful!')">Place Order</button>
            <button class="btn" style="border-color:#555; color:#555;" onclick="closeCheckout()">Cancel</button>
        </div>
    </div>

    <script>
        // --- INTRO VIDEO (Play once per session) ---
        const video = document.getElementById('intro-video');
        const splash = document.getElementById('splash-screen');
        if (sessionStorage.getItem('splashPlayed')) {
            splash.style.display = 'none';
        } else {
            video.onended = hideSplash;
            setTimeout(() => { if(splash.style.display !== 'none') hideSplash(); }, 8000);
        }
        function hideSplash() {
            sessionStorage.setItem('splashPlayed', 'true');
            splash.style.transition = 'opacity 0.8s ease';
            splash.style.opacity = '0';
            setTimeout(() => { splash.style.display = 'none'; }, 800);
        }

        // --- SCROLLING ---
        function scrollGrid(id, dist) { document.getElementById(id).scrollBy({ left: dist, behavior: 'smooth' }); }

        // --- THEME ---
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            document.getElementById('theme-icon').innerText = isLight ? '☾' : '☀';
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }
        if (localStorage.getItem('theme') === 'light') toggleTheme();

        // --- GOOGLE LOGIN ---
        const GOOGLE_CLIENT_ID = "1071024625530-5473jcrbmelr28945fn9200846a2702d.apps.googleusercontent.com";
        let googleTokenClient;
        window.onload = () => {
            googleTokenClient = google.accounts.oauth2.initTokenClient({
                client_id: GOOGLE_CLIENT_ID, scope: 'openid email profile',
                callback: (res) => {
                    fetch('https://www.googleapis.com/oauth2/v3/userinfo', { headers: { Authorization: `Bearer ${res.access_token}` }})
                    .then(r => r.json()).then(p => { document.querySelector('.login-btn').innerText = p.given_name.toUpperCase(); });
                }
            });
        };
        function startGoogleLogin() { googleTokenClient.requestAccessToken(); }

        // --- CART LOGIC ---
        let cart = [];
        function addToCart(name, price) {
            cart.push({name, price});
            updateCart();
            toggleCart();
        }
        function updateCart() {
            document.getElementById('cart-count').innerText = cart.length;
            const itemsDiv = document.getElementById('cart-items');
            itemsDiv.innerHTML = cart.map(i => `<div style="display:flex; justify-content:space-between; margin-bottom:10px;"><span>${i.name}</span><span>$${i.price}</span></div>`).join('') || "Your cart is empty.";
            const total = cart.reduce((sum, i) => sum + i.price, 0);
            document.getElementById('cart-total').innerText = `$${total.toFixed(2)}`;
        }
        function toggleCart() { 
            document.getElementById('cart-panel').classList.toggle('hidden'); 
            document.getElementById('cart-overlay').classList.toggle('hidden'); 
        }
        function openCheckout() { if(cart.length > 0) document.getElementById('checkout-modal').classList.remove('hidden'); }
        function closeCheckout() { document.getElementById('checkout-modal').classList.add('hidden'); }
    </script>
</body>
</html>
